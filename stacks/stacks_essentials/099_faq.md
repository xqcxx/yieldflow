# FAQ

Common questions and solutions for Clarinet development.

This page addresses common issues encountered when building with Clarinet, based on community feedback and support interactions.

<details>

<summary><strong>How do I test with sBTC tokens in my development environment?</strong></summary>

To test with sBTC tokens, add the mainnet sBTC contract as a requirement and mint tokens using the deployer address.

* Add sBTC as a requirement:\
  `clarinet requirements add SM3VDXK3WZZSA84XXFKAFAF15NNZX32CTSG82JFQ4.sbtc-token`
* Mint sBTC in your tests\
  // The sBTC multisig address that can mint\
  `const sbtcDeployer = "SM3VDXK3WZZSA84XXFKAFAF15NNZX32CTSG82JFQ4";`\
  // Mint sBTC to your test wallet\
  `const mintTx = simnet.callPublicFn( "SM3VDXK3WZZSA84XXFKAFAF15NNZX32CTSG82JFQ4.sbtc-token", "mint", [Cl.uint(1000000), Cl.principal(wallet1)], sbtcDeployer);`\
  \
  This approach lets you work with sBTC in unit tests without complex Bitcoin transaction simulation.

</details>

<details>

<summary><strong>Why am I getting an error when using mainnet addresses during mainnet simulation?</strong></summary>

When you run mainnet execution simulation, the target contract may expect mainnet addresses instead of the default testnet wallets. As of Clarinet v3.4.0, you can enable mainnet wallets in simnet with `use_mainnet_wallets = true`:

```toml
[repl.remote_data]
enabled = true
initial_height = 522000
use_mainnet_wallets = true
```

If you prefer to manage addresses manually, skip `simnet.getAccounts()` and use the specific mainnet principals you need:

```ts
// Instead of using simnet.getAccounts()
const mainnetAddress = "SP3R4F6C1J3JQWWCVZ3S7FRRYPMYG6ZW6RZK31FXY";

// Mint STX to any mainnet address
simnet.mintSTX(mainnetAddress, 1000000n);

// Call functions with a mainnet address
const result = simnet.callReadOnlyFn(
  "SP3R4F6C1J3JQWWCVZ3S7FRRYPMYG6ZW6RZK31FXY.pyth-storage-v3",
  "get-price",
  [priceFeed],
  mainnetAddress
);
```

The simnet accepts any valid Stacks address when mainnet simulation is enabled.

</details>

<details>

<summary><strong>How do I migrate from expectSTXTransferEvent to the new SDK?</strong></summary>

Clarinet v2 relies on standard Vitest matchers instead of the legacy event helpers.

Old approach (Clarinet v1):

```ts
block.receipts[0].events.expectSTXTransferEvent(
  amount,
  sender,
  recipient
);
```

New approach (Clarinet v2):

```ts
// Check for an exact event match
expect(events).toContainEqual({
  event: "stx_transfer_event",
  data: {
    amount: "1000000",
    memo: "",
    recipient: "ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM",
    sender: "ST1SJ3DTE5DN7X54YDH5D64R3BCB6A2AG2ZQ8YPD5",
  },
});

// Or assert specific properties only
expect(events).toContainEqual({
  event: "stx_transfer_event",
  data: expect.objectContaining({
    sender: address1,
    recipient: contractAddress,
  }),
});
```

For Clarity value assertions, use the built-in matchers:

```ts
expect(result).toBeOk(Cl.bool(true));
expect(result).toBeErr(Cl.uint(500));
```

</details>

<details>

<summary><strong>Why am I getting "bip39 error" when generating deployment plans?</strong></summary>

Starting with Clarinet 2.15.0, deployment configurations require 24-word mnemonics. Twelve-word mnemonics are no longer supported.

Update your configuration with a full 24-word phrase:

```toml
[accounts.deployer]

